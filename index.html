<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<style>
canvas{x-image-rendering:-moz-crisp-edges;image-rendering:pixelated;width:100%;height:auto}
html,body{height:100%;overflow:hidden}
</style>
<canvas id=c width=320 height=180></canvas>

<script>let e,l=e=>e,x=(e,l)=>Array.from({length:e},l),t=Math,{floor:o,ceil:n,sin:a,cos:i,abs:_,round:r,min:f,max:b,random:g}=t,{height:d,width:h}=c,s=d/2,p=h/2,y=c.getContext("2d"),T=2*t.PI,u=.7854,m="xx             x xx\nxx               xx\nxx            x  xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxxx              xx\n".repeat(10).trim().split("\n").map((e=>e.split("").map((e=>"x"===e)))),S=m[0].length,w=m.length,P=(e,l)=>m[l][e],A=e=>new Promise(e),v=e=>A((l=>setTimeout(l,e))),C=(e,l,x)=>e+(l-e)*x,R=(e,l,x)=>(x-e)/(l-e),$=(e,l,x,t,o)=>{let n=R(e,l,o);return C(x,t,n)},k=(e,l,x)=>x<e?e:x>l?l:x,M=(e,l,x)=>x<e?l+(x-e):x>l?e+(x-l):x,q=(e,l,x,t,o=1/32)=>{for(let n=0;n<=1;n+=o){if(P(0|C(e,x,n),0|C(l,t,n)))return 1}},G=A((l=>{e=l})),D=v(),O={},F=e=>l=>O[l.key]=e;onkeydown=F(1),onkeyup=F(),onclick=e;let I=e=>!!O[e],j=()=>(Z(),E(),ae(),setTimeout(j,42));D.then(j);let z,B,E=()=>{let e,l=-10,t=-10,r=s- -d*K/40;for(;(t+=4)<d;)e=_(t-r),e=R(0,r,e),e=C(.3,.6,e),e*=100,y.fillStyle=`hsl(88, ${e}%, ${e}%)`,y.fillRect(0,t,h,10);let g=e=>3.1*d/e,c=0,T=0,m=0,A=0,v=0,$=0,q=x((h+20)/2|0,(()=>{let e=C(-u,u,l/h),x=((e,l,x)=>{let t,_,r,f,b=.1,g=a(x)*b,c=i(x)*b,d=1e4;for(;d--&&(b+=.1,!(b>40))&&(l+=c,e=M(0,S-1,e+=g),l=M(0,w-1,l),t=o(e),_=o(l),r=n(e),f=n(l),!(r>=S||f>=w||t<0||_<0));)if(P(t,_)||P(r,f))return[e,l,b];return[]})(H,J,e)[2],t=g(x)||0;l+=2,(!x||x>40)&&(l<p&&!c&&(c=l+2),l>p&&(T=l+2));for(let e=.05;e<2;e+=.05)t>d*e&&(t*=1.03);let _=-d*K/x;return _=s-t/2-_|0,$=f($,_),A=b(A,_+t),v||=_,m||=_+t,[l,x,_,t]})),G=g(40),D=c,O=r-G/2|0,F=y.createRadialGradient(p,O+100,500,p,O+100,40);F.addColorStop(0,"yellow"),F.addColorStop(1,"purple"),y.fillStyle=F,y.fillRect(0,0,h,d);let I=y.createRadialGradient(c||T,O+200,70,(c||T)-10,O+200,200);I.addColorStop(0,"blue"),I.addColorStop(1,"purple"),y.fillStyle=I,y.beginPath(),y.moveTo(D,O+G),y.lineTo(T||c,O+G),y.lineTo(h,(A+$)/2),y.lineTo(2*h,2*d),y.lineTo(-h,2*d),y.lineTo(0,(m+v)/2),y.fill(),c&&T&&(y.fillStyle="rgba(0,0,0,0.4)",y.fillRect(D,O,T-c,2+(0|G)));for(let[e,l,x,t]of q){let o=R(0,40,l);o=k(0,l,o);let n=C(255,0,o);y.fillStyle=`rgb(${n}, ${n}, ${n})`,y.fillRect(e,x,4,t)}},H=5,J=5,K=3,L=1.7,N=0,Q=1.2,U=1,V=0,W=.6,X=0,Y=0,Z=()=>{if(U){let e=Q,l=0,x=0;I("w")&&(e+=1),I("s")&&(e-=1),I("a")&&(l-=1),I("d")&&(l+=1);let t,o=K-1;I(" ")&&Y>5?(x=3,Y=0):(K<.05?(K=_(K),x=_(X),X=_(X),Y=0):_(o)>2?(x=.2*-o,Y=0):(x=.1*-o,Y++),x=C(X,x,.1)),l&&e&&(l*=(.707+1)/2,e*=(.707+1)/2),l=C(V,l,.04),e=C(W,e,.2),V=l,W=e,X=x,l=l*L+H,e=e*L+J,x+=K,l=M(0,S-1,l),e=M(0,w-1,e),l>0&&e>0&&l<S&&e<w&&(r(H)==r(S/2)||N||!(t=q(H,J,l+1,e)||q(H,J,l-1,e)||q(H,J,l,e)))&&(H=l,J=e,K=x),t&&(U--,N++,(async()=>{let e=Date.now()+500;for(;Date.now()<e;)H=C(H,S/2,.3),await v(42);U++,N--})())}},ee=0,le=0,xe=V,te=W,oe=X,ne=0,ae=()=>{ne=ne+=8,ee+=.1*_(_(W)-_(V));let e=k(0,10,4*k(0,1,W-Q)+6*k(0,1,W-te))/10;le+=e,xe=C(xe,V,.1),te=C(te,W,.1),oe=C(oe,X,.1);let l=[p+1,d-30-15],x=[p-30,d-30+20],t=[p+30,d-30+20],o=[p-1,d-32];l[0]+=10*V,l[1]+=7*_(V),o[0]-=5*V,o[1]-=3*_(V),x[1]-=4*_(V),t[1]-=4*_(V),x[0]+=8*_(V),t[0]-=8*_(V),l[1]+=5*(W-Q),x[0]+=8*(te-Q),t[0]-=8*(te-Q);for(let e of[l,x,t,o]){let l=-2*_(xe)+9*(te-Q);e[1]+=l,e[1]-=C(0,4*a(ee),R(0,4,_(l)));let x=1+2*(te-W),t=2*k(0,1,$(1.5,L,0,1,te));e[0]+=a(ne*x)*t,e[0]=1.2*r(e[0]*(5/6)),e[1]=1.2*r(e[1]*(5/6))}let n=1+2*(te-W),f=.5*k(0,1,$(1.5,L,0,1,te));l[0]+=i(ne*n+10)*f,l[1]-=i(ne*n+10)*f*.5,y.fillStyle="black",y.beginPath(),y.moveTo(...l),y.lineTo(...x),y.lineTo(...t),y.lineTo(...l),y.fill(),y.fillStyle="gray",y.beginPath(),y.moveTo(...l),y.lineTo(...o),y.lineTo(...t),y.lineTo(...l),y.fill(),y.fillStyle="green",y.beginPath(),y.moveTo(...l),y.lineTo(...o),y.lineTo(...x),y.lineTo(...l),y.fill(),y.fillStyle="rgba(44,0,44,0.44)",y.beginPath(),l[1]=C(l[1],d,.8),x[1]=C(x[1],d,.8),t[1]=C(t[1],d,.8),y.moveTo(...l),y.lineTo(...x),y.lineTo(...t),y.lineTo(...l),y.fill(),o[1]+=11;let b=e=>{for(let l=.1;l<1;l+=.1)e>l&&(e*=1.1);return.15*e};e>.5&&(y.fillStyle="yellow",y.globalAlpha=e>.5?Math.sin(1.5*le)>g()-.5:(10*b(e+g()))**2,y.beginPath(),y.arc(...o,20*b(e+g()),0,T),y.fill(),y.globalAlpha=1),o[1]-=1,y.fillStyle="orange",y.globalAlpha=e>.5?Math.sin(1.5*le)>g()-.5:(10*e)**2,y.beginPath(),y.arc(...o,14*b(e+g()),0,T),y.fill(),y.globalAlpha=1,o[1]-=1,y.fillStyle=W>Q?"red":"purple",y.globalAlpha=b(e+g())>.5?Math.sin(1.5*le)>g()-.5:(10*b(e+g()))**2,y.beginPath(),y.arc(...o,10*b(e+g()),0,T),y.fill(),y.globalAlpha=1},ie=125,_e=e=>e.trim().split(/\s+/g),re=_e("_ c c# d d# e f f# g g# a a# b"),fe=(e,l)=>(e=re.indexOf(e))&&32.7*(2**(1/12))**(e-1+12*l),be=(e,l)=>{e.value=l},ge=(e,l)=>{let x=z.createOscillator(),t=z.createGain(),o=x.frequency,n=t.gain;return be(o,0),be(n,Math.log2(1+.025*e)),x.type=l,x.start(),x.connect(t).connect(z.destination),[o,n]};const ce=async(e,l,x,t,o,n)=>{for(B of e)be(t,C(l,x,B[0])*n),be(o,.04*(B[1]||B[0])),await v(10)};function*de([e,l],t,o,n){for(;;)for(B of _e(n)){let[,n,a,i=1]=B.match(/^(\w#?|_)(\d?)x?(\d+)?$/);if("x"===n)ce([[1],[.75,.7],[.75,.7],[.7],[.57,.6],[.27,.6],[.17,.5],[.1,.4],[.1,.2],[0]],111,255,e,l,o);else if("o"===n)ce([[.4],[.8],[1],[.75,.7],[.7],[.57,.6],[.27,.6],[.17,.5],[.1,.4],[.1,.2],[0]],15,70,e,l,o);else{let l=fe(n,a);be(e,l*o)}for(B of x(t*i))yield}}ie=6e4/330/2;let he="_x24 ",se=he+"_x8 ",pe="o o x o x o x o ",ye="o o x o o o x o "+pe+pe+pe,Te="e3x2 _x2 e3x2 d3x2 e3x2 _x2 e3x2 _x2 g3x2 _x2 g3x2 d3x2 g3x2 _x2 g3x2 _x2 ",ue="e4x2 _x2 e4x2 _x2 e4 _ g4 _ b4x2 _x2 ",me=e=>(e+" _ ").repeat(7)+e+"x2 ",Se=me("e4"),we="e3 _ e3 _ g3 _ a3 _ b3 _ b3 _ a3 _ g3x2 ",Pe=""+Se+me("d4"),Ae=""+Se+me("g4"),ve=""+we+we,Ce=""+Te+ue+ue+Te+ue+"e4x2 _x2 e4x2 _x2 e4 _ d4 _ e4x2 _x2 "+Pe+ve+Pe+(""+we+me("e3"))+Ae+ve+Pe+(we+"b3 _ a3 _ a3x2 _x2 b3 _ a3 _ d3x2 _x2 "),Re="b3x2 _x2 b3x2 _x2 b3 _ d4 _ e4x2 _x2 ",$e=""+me("b3")+me("a3")+se,ke=""+se+Re+Re+se+Re+"b3x2 _x2 b3x2 _x2 b3 _ a3 _ b3x2 _x2 "+$e+$e+(""+me("b3")+me("d4")+se)+$e,Me="b5x2 _x2 g5x2 _x2 e5x2 _x2 b5x2 _x2 g5x2 _x2 e5x2 _x2 ",qe="e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ ",Ge=qe+"b5 _ b5 _ b5x4 "+se,De=""+(Me+"b5x2 _x2 g5x2 _x2 e5x8 "+he)+(Me+"b5x2 _x2 c6x2 _x2 e5x8 "+he)+Ge+(qe+"b5 _ a5 _ b5x4 "+se)+(qe+"d6 _ e6 _ b5x4 "+se)+Ge;G.then((()=>{z=new AudioContext,(async e=>{for(;;){for(let[l,x]of e)v(x).then((()=>l.next()));await v(ie)}})([[de(ge(.3,"sawtooth"),1,1,Ce),34],[de(ge(.3),1,1,Ce),16],[de(ge(.1,""),1,1,ke),16],[de(ge(.125,""),1,.5,De),16],[de(ge(.3),1,1,De),16],[de(ge(0,"square"),2,1,ye),0]])})),G.then((()=>{c.requestFullscreen?.().catch(l)}));</script>