<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<style>
canvas{x-image-rendering:-moz-crisp-edges;image-rendering:pixelated;width:100%;height:auto}
html,body{height:100%;overflow:hidden}
</style>
<canvas id=c width=320 height=180></canvas>

<script>let e,x=e=>e,t=(e,x)=>Array.from({length:e},x),l=Math,{floor:o,ceil:_,sin:a,cos:n,abs:r,round:i,min:f,max:b}=l,{height:d,width:g}=c,s=d/2,p=g/2,u=c.getContext("2d"),h=2*l.PI,y=.7854,w=5,m=5,S=3,T=.25*h,C=0,R="xx             x xx\nxx               xx\nxx            x  xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxx               xx\nxxx              xx\n".repeat(10).trim().split("\n").map((e=>e.split("").map((e=>"x"===e)))),$=R[0].length,k=R.length,v=(e,x)=>R[x][e],A=e=>new Promise((x=>setTimeout(x,e))),P=(e,x,t)=>e+(x-e)*t,q=(e,x,t)=>(t-e)/(x-e),G=(e,x,t)=>t<e?x+(t-e):t>x?e+(t-x):t,D=(e,x,t,l,o=1/32)=>{for(let _=0;_<=1;_+=o){if(v(0|P(e,t,_),0|P(x,l,_)))return 1}},M=1,O=.6,F=0,I=0,j=0,z=()=>{if(M){let l=1.2,o=0,_=0;Q("w")&&(l+=1),Q("s")&&(l-=1),Q("a")&&(o-=1),Q("d")&&(o+=1);let f,b=S-1;Q(" ")&&j>5?(_=3,j=0):(S<.05?(S=r(S),_=r(I),I=r(I),j=0):r(b)>2?(_=.2*-b,j=0):(_=.1*-b,j++),_=P(I,_,.1)),l&&o&&(l*=(.707+1)/2,o*=(.707+1)/2),l=P(O,l,.04),o=P(F,o,.2),O=l,F=o,I=_,[l,o]=(x=o,[(e=l)*n(t=T)-x*a(t),e*a(t)+x*n(t)]),l=1.7*l+w,o=1.7*o+m,_+=S,l=G(0,$-1,l),o=G(0,k-1,o),l>0&&o>0&&l<$&&o<k&&(i(w)==i($/2)||C||!(f=D(w,m,l+1,o)||D(w,m,l-1,o)||D(w,m,l,o)))&&(w=l,m=o,S=_),f&&(M--,C++,(async()=>{let e=Date.now()+400;for(;Date.now()<e;)w=P(w,$/2,.3),await A(42);M++,C--})())}var e,x,t},B=()=>{let e,x=-10,l=-10,i=s- -d*S/40;for(;(l+=4)<d;)e=r(l-i),e=q(0,i,e),e=P(.3,.6,e),e*=100,u.fillStyle=`hsl(88, ${e}%, ${e}%)`,u.fillRect(0,l,g,10);let c=e=>3.1*d/e,h=0,C=0,R=0,A=0,D=0,M=0,O=t((g+20)/2|0,(()=>{let e=P(T-y,T+y,x/g),t=((e,x,t)=>{let l,r,i,f,b=e,c=x,d=.1,g=n(t)*d,s=a(t)*d,p=1e4;for(;p--&&(d+=.1,!(d>40))&&(b+=g,c+=s,b=G(0,$-1,b),c=G(0,k-1,c),l=o(b),r=o(c),i=_(b),f=_(c),!(i>=$||f>=k||l<0||r<0));)if(v(l,r)||v(i,f))return[b,c,d];return[]})(w,m,e)[2],l=c(t)||0;x+=2,(!t||t>40)&&(x<p&&!h&&(h=x+2),x>p&&(C=x+2));for(let e=.05;e<2;e+=.05)l>d*e&&(l*=1.03);let r=-d*S/t;return r=s-l/2-r|0,M=f(M,r),A=b(A,r+l),D||=r,R||=r+l,[x,t,r,l]})),F=c(40),I=h,j=i-F/2|0,z=u.createRadialGradient(p,j+100,500,p,j+100,40);z.addColorStop(0,"yellow"),z.addColorStop(1,"purple"),u.fillStyle=z,u.fillRect(0,0,g,d);let B=u.createRadialGradient(h||C,j+200,70,(h||C)-10,j+200,200);B.addColorStop(0,"blue"),B.addColorStop(1,"purple"),u.fillStyle=B,u.beginPath(),u.moveTo(I,j+F),u.lineTo(C||h,j+F),u.lineTo(g,(A+M)/2),u.lineTo(2*g,2*d),u.lineTo(-g,2*d),u.lineTo(0,(R+D)/2),u.fill(),h&&C&&(u.globalAlpha=.4,u.fillStyle="black",u.fillRect(I,j,C-h,0|F),u.globalAlpha=1);for(let[e,x,t,l]of O){let o=q(0,40,x);H=x,o=(J=o)<(E=0)?E:J>H?H:J;let _=P(255,0,o);u.fillStyle=`rgb(${_}, ${_}, ${_})`,u.fillRect(e,t,4,l)}var E,H,J},E=new Promise((x=>{e=x})),H={},J=e=>x=>{H[x.key]=e};var K,L;onkeydown=(K=J(1),L=e,(...e)=>L(K(...e))),onkeyup=J(),onclick=e;let N,Q=e=>!!H[e];(()=>{let e=()=>(z(),B(),setTimeout(e,42));e()})();let U,V=125,W=e=>e.trim().split(/\s+/g),X=W("_ c c# d d# e f f# g g# a a# b"),Y=(e,x)=>(e=X.indexOf(e))&&32.7*(2**(1/12))**(e-1+12*x),Z=(e,x)=>{e.value=x},ee=(e,x)=>{let t=N.createOscillator(),l=N.createGain(),o=t.frequency,_=l.gain;return Z(o,0),Z(_,Math.log2(1+.025*e)),t.type=x,t.start(),t.connect(l).connect(N.destination),[o,_]};const xe=async(e,x,t,l,o,_)=>{for(U of e)Z(l,P(x,t,U[0])*_),Z(o,.04*(U[1]||U[0])),await A(10)};function*te([e,x],l,o,_){for(;;)for(U of W(_)){let[,_,a,n=1]=U.match(/^(\w#?|_)(\d?)x?(\d+)?$/);if("x"===_)xe([[1],[.75,.7],[.75,.7],[.7],[.57,.6],[.27,.6],[.17,.5],[.1,.4],[.1,.2],[0]],111,255,e,x,o);else if("o"===_)xe([[.4],[.8],[1],[.75,.7],[.7],[.57,.6],[.27,.6],[.17,.5],[.1,.4],[.1,.2],[0]],15,70,e,x,o);else{let x=Y(_,a);Z(e,x*o)}for(U of t(l*n))yield}}V=6e4/330/2;let le="_x24 ",oe=le+"_x8 ",_e="o o x o x o x o ",ae="o o x o o o x o "+_e+_e+_e,ne="e3x2 _x2 e3x2 d3x2 e3x2 _x2 e3x2 _x2 g3x2 _x2 g3x2 d3x2 g3x2 _x2 g3x2 _x2 ",re="e4x2 _x2 e4x2 _x2 e4 _ g4 _ b4x2 _x2 ",ie=e=>(e+" _ ").repeat(7)+e+"x2 ",fe=ie("e4"),be="e3 _ e3 _ g3 _ a3 _ b3 _ b3 _ a3 _ g3x2 ",ce=""+fe+ie("d4"),de=""+fe+ie("g4"),ge=""+be+be,se=""+ne+re+re+ne+re+"e4x2 _x2 e4x2 _x2 e4 _ d4 _ e4x2 _x2 "+ce+ge+ce+(""+be+ie("e3"))+de+ge+ce+(be+"b3 _ a3 _ a3x2 _x2 b3 _ a3 _ d3x2 _x2 "),pe="b3x2 _x2 b3x2 _x2 b3 _ d4 _ e4x2 _x2 ",ue=""+ie("b3")+ie("a3")+oe,he=""+oe+pe+pe+oe+pe+"b3x2 _x2 b3x2 _x2 b3 _ a3 _ b3x2 _x2 "+ue+ue+(""+ie("b3")+ie("d4")+oe)+ue,ye="b5x2 _x2 g5x2 _x2 e5x2 _x2 b5x2 _x2 g5x2 _x2 e5x2 _x2 ",we="e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ e5 _ g5 _ b5 _ ",me=we+"b5 _ b5 _ b5x4 "+oe,Se=""+(ye+"b5x2 _x2 g5x2 _x2 e5x8 "+le)+(ye+"b5x2 _x2 c6x2 _x2 e5x8 "+le)+me+(we+"b5 _ a5 _ b5x4 "+oe)+(we+"d6 _ e6 _ b5x4 "+oe)+me;E.then((()=>{N=new AudioContext,(async e=>{for(;;){for(let[x,t]of e)A(t).then((()=>x.next()));await A(V)}})([[te(ee(.3,"sawtooth"),1,1,se),34],[te(ee(.3),1,1,se),16],[te(ee(.1,""),1,1,he),16],[te(ee(.125,""),1,.5,Se),16],[te(ee(.3),1,1,Se),16],[te(ee(0,"square"),2,1,ae),0]])})),E.then((()=>{c.requestFullscreen?.().catch(x)}));</script>